

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>TuflowModel &mdash; SHIP 0.3.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="SHIP 0.3.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> SHIP
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#topics">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ship.html">ship package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">ship-0.3.0.dev0</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">SHIP</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>TuflowModel</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tuflow/tuflowmodel.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuflowmodel">
<span id="tuflowmodel-top"></span><h1>TuflowModel<a class="headerlink" href="#tuflowmodel" title="Permalink to this headline">¶</a></h1>
<p>TuflowModel is main container class for all the components of a Tuflow model.
When you load a .tcf file with FileLoader it will return an instance of
TuflowModel.</p>
<div class="section" id="loading-tcf-files">
<h2>Loading .tcf files<a class="headerlink" href="#loading-tcf-files" title="Permalink to this headline">¶</a></h2>
<p>Like all files in the SHIP library .tcf files can be loaded with the
FileLoader class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ship.utils.fileloaders.fileloader</span> <span class="k">import</span> <span class="n">FileLoader</span>

<span class="n">tcf_path</span> <span class="o">=</span> <span class="s2">&quot;C:/path/to/a/tcffile.tcf&quot;</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">FileLoader</span><span class="p">()</span>
<span class="n">tuflow</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadFile</span><span class="p">(</span><span class="n">tcf_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The TuflowModel class itself does not provide a lot of functionality. Primarily
it is a container for for the ControlFile objects and a number of classes and
variables that are required globally. These are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>user_variables(UserVariables)</strong>: a class containing a the scenario values,
event values, and user defined variables set in the control files.</li>
<li><strong>bc_event(dict)</strong>: contains the currently set BC Event variables (i.e.
&#8216;BC Event Name&#8217;, &#8216;BC Event Text&#8217; and &#8216;BC Event Source&#8217;.</li>
<li><strong>root(str)</strong>: the directory that the loaded .tcf file is in. As Tuflow models
generally use relative paths between files, this is used to derive the
absolute paths of the different components.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="data-access">
<h2>Data Access<a class="headerlink" href="#data-access" title="Permalink to this headline">¶</a></h2>
<p>Generally the main component of the TuflowModel used is the control_files
dict. You can use this to access the different ControlFiles includes in the
currently loaded model:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Individually access the ControlFiles objects</span>
<span class="c1"># Note that if a particular type of file is not included in the model it</span>
<span class="c1"># will raise a KeyError</span>
<span class="n">tgc</span> <span class="o">=</span> <span class="n">tuflow</span><span class="o">.</span><span class="n">control_files</span><span class="p">[</span><span class="s1">&#39;TGC&#39;</span><span class="p">]</span>
<span class="n">tef</span> <span class="o">=</span> <span class="n">tuflow</span><span class="o">.</span><span class="n">control_files</span><span class="p">[</span><span class="s1">&#39;TEF&#39;</span><span class="p">]</span>

<span class="c1"># Loop through all of the loaded control file types</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">tuflow</span><span class="o">.</span><span class="n">control_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
   <span class="nb">print</span> <span class="p">(</span><span class="n">key</span><span class="p">)</span>
   <span class="c1"># ... do something with ControlFile</span>
</pre></div>
</div>
<p>There are not a lot of methods in the TuflowModel. One that is of interest
is the checkPathsExist(). This is just a wrapper for the same function in the
ControlFile&#8217;s, but allows for a quick check that all files referenced by the
ControlFile&#8217;s exist.</p>
</div>
<div class="section" id="user-variables">
<span id="tuflowmodel-uservariables"></span><h2>User Variables<a class="headerlink" href="#user-variables" title="Permalink to this headline">¶</a></h2>
<p>The UserVariables class is in the ship.tuflow.tuflowmodel.py module. It is
used to store all user defined variables in a tuflow model. This includes the
scenario and event logic values, whether set within the control files or from
the batchfile/command line (just like Tuflow, if any scenario/event values are
provided as an argument to the loaded they will supersede all found in the
control files). It also includes any variables set in the control files
using the &#8216;Set somevariables == anumber&#8217; syntax.</p>
<p>It stores all of these in three dicts:</p>
<blockquote>
<div><ul class="simple">
<li><strong>scenario(dict)</strong>: containing a dict of TuflowModelVariable&#8217;s</li>
<li><strong>event(dict)</strong>: containing a dict of TuflowModelVariable&#8217;s</li>
<li><strong>variables(dict)</strong>: containing a dict of TuflowUserVariable&#8217;s</li>
</ul>
</div></blockquote>
<p>The keys to access the TuflowModelVariable or TuflowUserVariable objects are
the variable names. You can either access the dict&#8217;s directly or use the
get() method, which takes a key and a &#8216;vtype&#8217; value: either &#8216;scenario&#8217;, &#8216;event&#8217;,
or None (default is None - if None it will look in the variables dict).</p>
<p>There are two main methods that you will probably use a lot of:</p>
<blockquote>
<div><ul class="simple">
<li>seValsToDict()</li>
<li>variablesToDict()</li>
</ul>
</div></blockquote>
<p>The first will return a dict in the format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">se_vals</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;scenario&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s1">&#39;s1&#39;</span><span class="p">:</span> <span class="s1">&#39;scen1&#39;</span><span class="p">,</span> <span class="s1">&#39;s2&#39;</span><span class="p">:</span> <span class="s1">&#39;scen2&#39;</span>
     <span class="p">},</span>
    <span class="s1">&#39;event&#39;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s1">&#39;e1&#39;</span><span class="p">:</span> <span class="s1">&#39;evt1&#39;</span><span class="p">,</span> <span class="s1">&#39;e2&#39;</span><span class="p">:</span> <span class="s1">&#39;5&#39;</span>
    <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>This dict is accepted by most of the methods in the ControlFile class, to limit
the returned values to those inside the current event. The contents of this
dict will be the currently active scenario and event logic.</p>
<p>The second method will return a dict in the format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">variables</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">&#39;s1&#39;</span><span class="p">:</span> <span class="s1">&#39;scen1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;s2&#39;</span><span class="p">:</span> <span class="s1">&#39;scen2&#39;</span><span class="p">,</span>
   <span class="s1">&#39;e1&#39;</span><span class="p">:</span> <span class="s1">&#39;evt1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;e2&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
   <span class="s1">&#39;myfirstvar&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
   <span class="s1">&#39;anothervar&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These are all of the currently set user variables in the model. You will notice
that it also includes the scenario and event variables (continuing the example
from above). This is because Tuflow treats the scenario and event value as
variables as well, so you can do &#8216;Cell Size == &lt;&lt;e2&gt;&gt;&#8217; if you want or
&#8216;Cell Size == &lt;&lt;myfirstvar&gt;&gt;&#8217; it doesn&#8217;t make any difference.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Duncan Runnacles.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>